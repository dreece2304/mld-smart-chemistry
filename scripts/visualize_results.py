#!/usr/bin/env python3
"""
Create HTML viewer for molecular visualization results
Opens in any web browser - perfect for WSL!
"""

import os
import glob
from datetime import datetime

def create_html_viewer():
    """Create HTML page with all molecular visualizations"""
    
    # Find all PNG files
    png_files = glob.glob('*.png')
    
    if not png_files:
        print("‚ùå No PNG files found. Run visualize_molecules.py first!")
        return
    
    # Create HTML content
    html_content = f"""
<!DOCTYPE html>
<html>
<head>
    <title>MLD Molecular Visualization Results</title>
    <style>
        body {{ font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }}
        .container {{ max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }}
        h1 {{ color: #2c3e50; text-align: center; }}
        .molecule {{ margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }}
        .molecule h3 {{ color: #34495e; margin-top: 0; }}
        .molecule img {{ max-width: 100%; height: auto; border: 1px solid #ccc; border-radius: 5px; }}
        .grid {{ display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; }}
        .timestamp {{ text-align: center; color: #7f8c8d; font-size: 0.9em; }}
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ MLD Molecular Visualization Results</h1>
        <p class="timestamp">Generated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}</p>
        
        <div class="grid">
"""
    
    # Add each PNG file
    for png_file in sorted(png_files):
        molecule_name = png_file.replace('_plot.png', '').replace('_convergence.png', '').replace('_', ' ').title()
        
        if 'convergence' in png_file:
            title = f"üìà {molecule_name} Optimization Convergence"
        elif 'comparison' in png_file:
            title = f"üìä Molecule Comparison"
        else:
            title = f"üß¨ {molecule_name} Structure"
        
        html_content += f"""
            <div class="molecule">
                <h3>{title}</h3>
                <img src="{png_file}" alt="{title}">
                <p><strong>File:</strong> {png_file}</p>
            </div>
        """
    
    html_content += """
        </div>
        
        <div style="margin-top: 40px; text-align: center; color: #7f8c8d;">
            <p>Generated by MLD Smart Chemistry Framework</p>
        </div>
    </div>
</body>
</html>
    """
    
    # Save HTML file
    with open('molecular_results.html', 'w') as f:
        f.write(html_content)
    
    print("‚úÖ HTML viewer created: molecular_results.html")
    print("\nTo view:")
    print("1. Copy to Windows: cp molecular_results.html /mnt/c/Users/$USER/Desktop/")
    print("2. Open in any web browser")
    print("3. Or use WSL browser: wslview molecular_results.html")

if __name__ == "__main__":
    create_html_viewer()